version: "3.1"

intents:
  # GREETINGS
  - greet
  - goodbye
  - ask_how
  - affirm
  - deny

  # OUT OF SCOPE / REDIRECT TO AGENT
  - out_of_scope
  - redirect_agent
  - agent_callback

  # GENERAL
  - what_can_you_do
  - who_are_you

  # GENERAL INSURANCE
  - show_policy

  # QUOTES
  - get_renew_quote
  - get_quote_retrieve
  - get_quote_valid
  - how_buy_insurance

  # INSURANCE FAQ
  - faq_big_3
  - faq_cancer
  - faq_car
  - faq_home
  - faq_maid
  - faq_pa
  - faq_stroke
  - faq_travel
  
  # HOOKS
  - initiate_hook_comment
  - initiate_hook_like
  - emoji_quiz_water_ski_correct
  - emoji_quiz_snow_boarding_correct
  - emoji_quiz_mountain_biking_correct
  - emoji_quiz_incorrect
  - emoji_quiz_start

  # CLAIMS
  - claim_select_insurance
  - claim_general
  - claim_login_password

entities:
  - agent_callback_choice
  - has_login_password

forms:
  agent_form:
    required_slots:
        - agent_form_user_first_name
        - agent_form_user_last_name
        - agent_form_user_email

  agent_callback_form:
    required_slots:
        - callback_form_user_first_name
        - callback_form_user_last_name
        - callback_form_user_email
        - callback_form_user_number
        - callback_form_user_nature
        - callback_form_user_message

slots:
  # HOOKS
  user_like_post:
    type: bool
    initial_value: false
    influence_conversation: true
    mappings:
    - type: from_intent
      value: true
      intent: initiate_hook_like
  user_comment_post:
    type: bool
    initial_value: false
    influence_conversation: true
    mappings:
    - type: from_intent
      value: true
      intent: initiate_hook_comment
  # CLAIMS
  has_login_password:
    type: bool
    influence_conversation: true
    mappings:
    - type: from_entity
      entity: has_login_password
  # ACTIVATE FORMS
  activate_agent_form:
    type: bool
    initial_value: false
    influence_conversation: true
    mappings:
    - type: custom
      action: action_agent_transfer_check
  # AGENT FORM
  agent_form_user_first_name:
    type: text
    influence_conversation: true
    mappings:
    - type: from_text
      conditions:
      - active_loop: agent_form
        requested_slot: agent_form_user_first_name
  agent_form_user_last_name:
    type: text
    influence_conversation: true
    mappings:
    - type: from_text
      conditions:
      - active_loop: agent_form
        requested_slot: agent_form_user_last_name
  agent_form_user_email:
    type: text
    influence_conversation: true
    mappings:
    - type: from_text
      conditions:
      - active_loop: agent_form
        requested_slot: agent_form_user_email
  # CALLBACK
  agent_callback_choice:
    type: bool
    influence_conversation: true
    mappings:
    - type: from_entity
      entity: agent_callback_choice
  callback_form_user_first_name:
    type: text
    influence_conversation: true
    mappings:
    - type: from_text
      conditions:
      - active_loop: agent_callback_form
        requested_slot: callback_form_user_first_name
  callback_form_user_last_name:
    type: text
    influence_conversation: true
    mappings:
    - type: from_text
      conditions:
      - active_loop: agent_callback_form
        requested_slot: callback_form_user_last_name
  callback_form_user_email:
    type: text
    influence_conversation: true
    mappings:
    - type: from_text
      conditions:
      - active_loop: agent_callback_form
        requested_slot: callback_form_user_email
  callback_form_user_number:
    type: text
    influence_conversation: true
    mappings:
    - type: from_text
      conditions:
      - active_loop: agent_callback_form
        requested_slot: callback_form_user_number
  callback_form_user_nature:
    type: text
    influence_conversation: true
    mappings:
    - type: from_text
      conditions:
      - active_loop: agent_callback_form
        requested_slot: callback_form_user_nature
  callback_form_user_message:
    type: text
    influence_conversation: true
    mappings:
    - type: from_text
      conditions:
      - active_loop: agent_callback_form
        requested_slot: callback_form_user_message

actions:
  # TRANSFER TO HUMAN AGENT
  - action_agent_transfer_check
  - validate_agent_form
  - validate_agent_callback_form

session_config:
  session_expiration_time: 60
  carry_over_slots_to_new_session: true